<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•Œê³ ë¦¬ì¦˜ ë†€ì´í„° ğŸ®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .bounce {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-glow {
            from { box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }
            to { box-shadow: 0 0 30px rgba(255, 255, 255, 0.6); }
        }
    </style>
</head>
<body class="overflow-x-hidden">
    <!-- ë©”ì¸ í™”ë©´ -->
    <div id="mainScreen" class="min-h-screen flex flex-col items-center justify-center p-4">
        <!-- í—¤ë” -->
        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-bold text-white mb-4 bounce">
                ğŸ® ì•Œê³ ë¦¬ì¦˜ ë†€ì´í„° ğŸ®
            </h1>
            <p class="text-xl md:text-2xl text-white/90 mb-2">
                ì •ë ¬ê³¼ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì„ ì¬ë¯¸ìˆê²Œ ë°°ì›Œë³´ì!
            </p>
            <div class="text-6xl float mb-6">ğŸš€</div>
            
            <!-- ìƒë‹¨ ë²„íŠ¼ë“¤ -->
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button onclick="showTutorial()" class="bg-white/20 backdrop-blur-sm text-white px-6 py-3 rounded-full font-medium hover:bg-white/30 transition-all duration-300 flex items-center gap-2">
                    <span>ğŸ“š</span> ì‚¬ìš©ë²• ë³´ê¸°
                </button>
                <button onclick="showQuiz()" class="bg-white/20 backdrop-blur-sm text-white px-6 py-3 rounded-full font-medium hover:bg-white/30 transition-all duration-300 flex items-center gap-2">
                    <span>ğŸ§ </span> í€´ì¦ˆ í’€ê¸°
                </button>
            </div>
        </div>

        <!-- ì•Œê³ ë¦¬ì¦˜ ì„ íƒ ì¹´ë“œë“¤ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl w-full">
            <!-- ë²„ë¸”ì •ë ¬ ì¹´ë“œ -->
            <div class="card-hover bg-gradient-to-br from-pink-400 to-red-400 rounded-3xl p-8 text-white cursor-pointer pulse-glow" onclick="selectAlgorithm('bubble')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ«§</div>
                    <h3 class="text-2xl font-bold mb-3">ë²„ë¸”ì •ë ¬</h3>
                    <p class="text-lg opacity-90 mb-4">
                        ê±°í’ˆì´ ë¬¼ ìœ„ë¡œ ì˜¬ë¼ì˜¤ë“¯<br>
                        í° ìˆ˜ê°€ ë’¤ë¡œ ì´ë™í•´ìš”!
                    </p>
                    <div class="flex justify-center space-x-2">
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">3</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">1</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">4</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">2</div>
                    </div>
                </div>
            </div>

            <!-- ì„ íƒì •ë ¬ ì¹´ë“œ -->
            <div class="card-hover bg-gradient-to-br from-blue-400 to-purple-400 rounded-3xl p-8 text-white cursor-pointer pulse-glow" onclick="selectAlgorithm('selection')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ¯</div>
                    <h3 class="text-2xl font-bold mb-3">ì„ íƒì •ë ¬</h3>
                    <p class="text-lg opacity-90 mb-4">
                        ê°€ì¥ ì‘ì€ ìˆ˜ë¥¼ ì°¾ì•„ì„œ<br>
                        ì•ìë¦¬ì— ë°°ì¹˜í•´ìš”!
                    </p>
                    <div class="flex justify-center space-x-2">
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">5</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">2</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">8</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">1</div>
                    </div>
                </div>
            </div>

            <!-- ìˆœì°¨íƒìƒ‰ ì¹´ë“œ -->
            <div class="card-hover bg-gradient-to-br from-green-400 to-teal-400 rounded-3xl p-8 text-white cursor-pointer pulse-glow" onclick="selectAlgorithm('linear')">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ”</div>
                    <h3 class="text-2xl font-bold mb-3">ìˆœì°¨íƒìƒ‰</h3>
                    <p class="text-lg opacity-90 mb-4">
                        ì²˜ìŒë¶€í„° ëê¹Œì§€ í•˜ë‚˜ì”©<br>
                        ì°¨ê·¼ì°¨ê·¼ ì°¾ì•„ê°€ìš”!
                    </p>
                    <div class="flex justify-center space-x-2">
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">7</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">3</div>
                        <div class="w-8 h-8 bg-white/50 rounded-lg flex items-center justify-center text-sm font-bold">9</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">2</div>
                    </div>
                </div>
            </div>

            <!-- ì´ì§„íƒìƒ‰ ì¹´ë“œ -->
            <div class="card-hover bg-gradient-to-br from-yellow-400 to-orange-400 rounded-3xl p-8 text-white cursor-pointer pulse-glow" onclick="selectAlgorithm('binary')">
                <div class="text-center">
                    <div class="text-6xl mb-4">âš¡</div>
                    <h3 class="text-2xl font-bold mb-3">ì´ì§„íƒìƒ‰</h3>
                    <p class="text-lg opacity-90 mb-4">
                        ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê°€ë©´ì„œ<br>
                        ë¹ ë¥´ê²Œ ì°¾ì•„ê°€ìš”!
                    </p>
                    <div class="flex justify-center space-x-2">
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">1</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">3</div>
                        <div class="w-8 h-8 bg-white/50 rounded-lg flex items-center justify-center text-sm font-bold">5</div>
                        <div class="w-8 h-8 bg-white/30 rounded-lg flex items-center justify-center text-sm font-bold">7</div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <!-- ì‹œë®¬ë ˆì´ì…˜ í™”ë©´ -->
    <div id="simulationScreen" class="hidden min-h-screen bg-white p-4">
        <!-- í—¤ë” -->
        <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-2xl p-6 mb-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <span id="algorithmIcon" class="text-4xl">ğŸ«§</span>
                    <div>
                        <h1 id="algorithmTitle" class="text-3xl font-bold">ë²„ë¸”ì •ë ¬</h1>
                        <p id="algorithmDesc" class="text-lg opacity-90">ì¸ì ‘í•œ ë‘ ì›ì†Œë¥¼ ë¹„êµí•˜ì—¬ í° ìˆ˜ë¥¼ ë’¤ë¡œ ë³´ëƒ…ë‹ˆë‹¤</p>
                    </div>
                </div>
                <button onclick="goHome()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all duration-300">
                    ğŸ  í™ˆìœ¼ë¡œ
                </button>
            </div>
        </div>

        <!-- ë°ì´í„° ì…ë ¥ ì„¹ì…˜ -->
        <div class="bg-gray-50 rounded-2xl p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“ ë°ì´í„° ì…ë ¥</h3>
            <div class="flex flex-wrap gap-4 items-end">
                <div class="flex-1 min-w-64">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ìˆ«ìë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì„œ ì…ë ¥í•˜ì„¸ìš”</label>
                    <input type="text" id="dataInput" placeholder="ì˜ˆ: 5,2,8,1,9,3" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                </div>
                <button onclick="generateRandomData()" class="bg-gradient-to-r from-green-500 to-teal-500 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-300">
                    ğŸ² ëœë¤ ìƒì„±
                </button>
                <button onclick="setData()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-300">
                    âœ… ì„¤ì •í•˜ê¸°
                </button>
            </div>
            
            <!-- ì •ë ¬ ë°©í–¥ ì„ íƒ (ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ìš©) -->
            <div id="sortOrderSection" class="hidden mt-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">ì •ë ¬ ë°©í–¥ì„ ì„ íƒí•˜ì„¸ìš”</label>
                <div class="flex gap-4">
                    <label class="flex items-center">
                        <input type="radio" name="sortOrder" value="asc" checked class="mr-2 text-purple-500 focus:ring-purple-500">
                        <span class="text-gray-700">ğŸ”¼ ì˜¤ë¦„ì°¨ìˆœ (ì‘ì€ ìˆ˜ â†’ í° ìˆ˜)</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="sortOrder" value="desc" class="mr-2 text-purple-500 focus:ring-purple-500">
                        <span class="text-gray-700">ğŸ”½ ë‚´ë¦¼ì°¨ìˆœ (í° ìˆ˜ â†’ ì‘ì€ ìˆ˜)</span>
                    </label>
                </div>
            </div>
            
            <!-- íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ìš© ê²€ìƒ‰ ì…ë ¥ -->
            <div id="searchSection" class="hidden mt-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">ì°¾ì„ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”</label>
                <input type="number" id="searchInput" placeholder="ì°¾ì„ ìˆ«ì" 
                       class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
            </div>
        </div>

        <!-- ì‹œê°í™” ì„¹ì…˜ -->
        <div class="bg-white border-2 border-gray-200 rounded-2xl p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ‘€ ì‹œê°í™”</h3>
            <div id="dataVisualization" class="flex flex-wrap gap-6 justify-center min-h-32 items-center pt-8 pb-16">
                <p class="text-gray-500">ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  ì„¤ì •í•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!</p>
            </div>
        </div>

        <!-- ì œì–´ ë²„íŠ¼ë“¤ -->
        <div class="bg-gray-50 rounded-2xl p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ® ì œì–´</h3>
            <div class="flex flex-wrap gap-4 justify-center">
                <button id="playBtn" onclick="startSimulation()" disabled 
                        class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                    â–¶ï¸ ì‹œì‘
                </button>
                <button id="pauseBtn" onclick="pauseSimulation()" disabled 
                        class="bg-gradient-to-r from-amber-400 to-orange-400 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                    â¸ï¸ ì¼ì‹œì •ì§€
                </button>
                <button id="resetBtn" onclick="resetSimulation()" disabled 
                        class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                    ğŸ”„ ì´ˆê¸°í™”
                </button>
                <button id="stepBtn" onclick="nextStep()" disabled 
                        class="bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                    ğŸ‘† í•œ ë‹¨ê³„
                </button>
            </div>
        </div>

        <!-- ì§„í–‰ ìƒí™© -->
        <div class="bg-white border-2 border-gray-200 rounded-2xl p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“Š ì§„í–‰ ìƒí™©</h3>
            <div class="mb-4">
                <div class="bg-gray-200 rounded-full h-3 overflow-hidden">
                    <div id="progressBar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
            <div class="mt-4 bg-yellow-50 rounded-lg p-4">
                <h4 class="font-bold text-gray-800 mb-2">ğŸ’¡ ì„¤ëª…</h4>
                <p id="explanation" class="text-gray-600">ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ê³  ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©´ ë‹¨ê³„ë³„ ì„¤ëª…ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>

    <!-- íŠœí† ë¦¬ì–¼ ëª¨ë‹¬ -->
    <div id="tutorialModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
        <div class="bg-white rounded-3xl p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">ğŸ“š</div>
                <h3 class="text-3xl font-bold text-gray-800">ì•Œê³ ë¦¬ì¦˜ ë†€ì´í„° ì‚¬ìš©ë²•</h3>
            </div>
            
            <div class="space-y-6">
                <div class="flex items-start gap-4">
                    <div class="text-3xl">1ï¸âƒ£</div>
                    <div>
                        <h4 class="font-bold text-lg text-gray-800 mb-2">ì•Œê³ ë¦¬ì¦˜ ì„ íƒí•˜ê¸°</h4>
                        <p class="text-gray-600">ë©”ì¸ í™”ë©´ì—ì„œ ë°°ìš°ê³  ì‹¶ì€ ì•Œê³ ë¦¬ì¦˜ ì¹´ë“œë¥¼ í´ë¦­í•´ì£¼ì„¸ìš”!</p>
                    </div>
                </div>
                
                <div class="flex items-start gap-4">
                    <div class="text-3xl">2ï¸âƒ£</div>
                    <div>
                        <h4 class="font-bold text-lg text-gray-800 mb-2">ë°ì´í„° ì…ë ¥í•˜ê¸°</h4>
                        <p class="text-gray-600">ìˆ«ìë¥¼ ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ëœë¤ ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!</p>
                    </div>
                </div>
                
                <div class="flex items-start gap-4">
                    <div class="text-3xl">3ï¸âƒ£</div>
                    <div>
                        <h4 class="font-bold text-lg text-gray-800 mb-2">ì‹œë®¬ë ˆì´ì…˜ ë³´ê¸°</h4>
                        <p class="text-gray-600">ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì•Œê³ ë¦¬ì¦˜ì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!</p>
                    </div>
                </div>
                
                <div class="flex items-start gap-4">
                    <div class="text-3xl">4ï¸âƒ£</div>
                    <div>
                        <h4 class="font-bold text-lg text-gray-800 mb-2">í€´ì¦ˆ í’€ê¸°</h4>
                        <p class="text-gray-600">ì•Œê³ ë¦¬ì¦˜ì„ ë°°ìš´ í›„ í€´ì¦ˆë¥¼ í’€ì–´ì„œ ì‹¤ë ¥ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="closeTutorial()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300">
                    ì‹œì‘í•˜ê¸°! ğŸš€
                </button>
            </div>
        </div>
    </div>

    <!-- í€´ì¦ˆ ëª¨ë‹¬ -->
    <div id="quizModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
        <div class="bg-white rounded-3xl p-8 max-w-3xl mx-4 max-h-[80vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">ğŸ§ </div>
                <h3 class="text-3xl font-bold text-gray-800">ì•Œê³ ë¦¬ì¦˜ í€´ì¦ˆ</h3>
                <p class="text-gray-600 mt-2">ë°°ìš´ ë‚´ìš©ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
            </div>
            
            <!-- í€´ì¦ˆ ì§„í–‰ ìƒí™© -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-600">ì§„í–‰ ìƒí™©</span>
                    <span id="quizProgress" class="text-sm font-medium text-purple-600">1 / 5</span>
                </div>
                <div class="bg-gray-200 rounded-full h-2">
                    <div id="quizProgressBar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-500" style="width: 20%"></div>
                </div>
            </div>
            
            <!-- í€´ì¦ˆ ë‚´ìš© -->
            <div id="quizContent" class="mb-8">
                <!-- í€´ì¦ˆ ë¬¸ì œê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- í€´ì¦ˆ ê²°ê³¼ -->
            <div id="quizResult" class="hidden text-center">
                <div class="text-6xl mb-4" id="resultEmoji">ğŸ‰</div>
                <h4 class="text-2xl font-bold text-gray-800 mb-4" id="resultTitle">í€´ì¦ˆ ì™„ë£Œ!</h4>
                <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-6 mb-6">
                    <div class="text-4xl font-bold text-purple-600 mb-2" id="finalScore">5 / 5</div>
                    <p class="text-gray-600" id="scoreMessage">ì™„ë²½í•´ìš”! ì•Œê³ ë¦¬ì¦˜ ë§ˆìŠ¤í„°!</p>
                </div>
                <div class="flex gap-4 justify-center">
                    <button onclick="restartQuiz()" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300">
                        ğŸ”„ ë‹¤ì‹œ í’€ê¸°
                    </button>
                    <button onclick="closeQuiz()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300">
                        âœ… ì™„ë£Œ
                    </button>
                </div>
            </div>
            
            <!-- í€´ì¦ˆ ì œì–´ ë²„íŠ¼ -->
            <div id="quizControls" class="text-center">
                <button onclick="closeQuiz()" class="bg-gray-500 text-white px-6 py-3 rounded-full font-medium hover:bg-gray-600 transition-all duration-300">
                    âŒ ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ë“¤
        let currentAlgorithm = '';
        let originalData = [];
        let currentData = [];
        let isRunning = false;
        let currentStep = 0;
        let totalSteps = 0;
        let animationSpeed = 1000;
        let searchTarget = null;
        
        // ì •ë ¬ ë°©í–¥ í™•ì¸ í•¨ìˆ˜
        function getSortOrder() {
            const sortOrderRadios = document.getElementsByName('sortOrder');
            for (let radio of sortOrderRadios) {
                if (radio.checked) {
                    return radio.value;
                }
            }
            return 'asc'; // ê¸°ë³¸ê°’
        }

        // ì•Œê³ ë¦¬ì¦˜ ì„ íƒ í•¨ìˆ˜
        function selectAlgorithm(type) {
            currentAlgorithm = type;
            
            // ë©”ì¸ í™”ë©´ ìˆ¨ê¸°ê³  ì‹œë®¬ë ˆì´ì…˜ í™”ë©´ ë³´ì´ê¸°
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('simulationScreen').classList.remove('hidden');
            
            // ì•Œê³ ë¦¬ì¦˜ë³„ UI ì„¤ì •
            const algorithmInfo = {
                'bubble': {
                    title: 'ğŸ«§ ë²„ë¸”ì •ë ¬',
                    desc: 'ì¸ì ‘í•œ ë‘ ì›ì†Œë¥¼ ë¹„êµí•˜ì—¬ í° ìˆ˜ë¥¼ ë’¤ë¡œ ë³´ëƒ…ë‹ˆë‹¤',
                    icon: 'ğŸ«§'
                },
                'selection': {
                    title: 'ğŸ¯ ì„ íƒì •ë ¬',
                    desc: 'ê°€ì¥ ì‘ì€ ì›ì†Œë¥¼ ì°¾ì•„ì„œ ì•ìë¦¬ì— ë°°ì¹˜í•©ë‹ˆë‹¤',
                    icon: 'ğŸ¯'
                },
                'linear': {
                    title: 'ğŸ” ìˆœì°¨íƒìƒ‰',
                    desc: 'ì •ë ¬ë˜ì§€ ì•Šì€ ë°ì´í„°ì—ì„œë„ ì²˜ìŒë¶€í„° ëê¹Œì§€ í•˜ë‚˜ì”© í™•ì¸í•˜ì—¬ ì›ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤',
                    icon: 'ğŸ”'
                },
                'binary': {
                    title: 'âš¡ ì´ì§„íƒìƒ‰',
                    desc: 'âš ï¸ ì •ë ¬ëœ ë°°ì—´ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥! ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë¹ ë¥´ê²Œ ì›ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤',
                    icon: 'âš¡'
                }
            };
            
            const info = algorithmInfo[type];
            document.getElementById('algorithmTitle').textContent = info.title;
            document.getElementById('algorithmDesc').textContent = info.desc;
            document.getElementById('algorithmIcon').textContent = info.icon;
            
            // ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì¸ ê²½ìš° ì •ë ¬ ë°©í–¥ ì„ íƒ í‘œì‹œ
            const sortOrderSection = document.getElementById('sortOrderSection');
            if (type === 'bubble' || type === 'selection') {
                sortOrderSection.classList.remove('hidden');
            } else {
                sortOrderSection.classList.add('hidden');
            }
            
            // íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì¸ ê²½ìš° ê²€ìƒ‰ ì…ë ¥ í•„ë“œ í‘œì‹œ
            const searchSection = document.getElementById('searchSection');
            if (type === 'linear' || type === 'binary') {
                searchSection.classList.remove('hidden');
            } else {
                searchSection.classList.add('hidden');
            }
            
            // ì´ˆê¸°í™”
            resetSimulation();
        }
        
        // í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function goHome() {
            document.getElementById('simulationScreen').classList.add('hidden');
            document.getElementById('mainScreen').classList.remove('hidden');
            resetSimulation();
        }

        // ëœë¤ ë°ì´í„° ìƒì„±
        function generateRandomData() {
            const count = Math.floor(Math.random() * 6) + 5; // 5-10ê°œ
            const data = [];
            for (let i = 0; i < count; i++) {
                data.push(Math.floor(Math.random() * 50) + 1); // 1-50
            }
            document.getElementById('dataInput').value = data.join(',');
        }

        // ë°ì´í„° ì„¤ì •
        function setData() {
            const input = document.getElementById('dataInput').value.trim();
            if (!input) {
                alert('ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            try {
                const data = input.split(',').map(num => {
                    const parsed = parseInt(num.trim());
                    if (isNaN(parsed)) throw new Error('ìˆ«ìê°€ ì•„ë‹™ë‹ˆë‹¤');
                    return parsed;
                });

                if (data.length < 2) {
                    alert('ìµœì†Œ 2ê°œ ì´ìƒì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }

                originalData = [...data];
                currentData = [...data];
                
                // íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì˜ ê²½ìš° ê²€ìƒ‰ ëŒ€ìƒ ì„¤ì •
                if (currentAlgorithm === 'linear' || currentAlgorithm === 'binary') {
                    const searchInput = document.getElementById('searchInput').value.trim();
                    
                    // ê²€ìƒ‰í•  ìˆ«ìê°€ ì…ë ¥ë˜ì§€ ì•Šì€ ê²½ìš° ë°ì´í„°ì—ì„œ ëœë¤ ì„ íƒ
                    if (!searchInput) {
                        const randomIndex = Math.floor(Math.random() * data.length);
                        searchTarget = data[randomIndex];
                        document.getElementById('searchInput').value = searchTarget;
                        updateStepInfo(`ê²€ìƒ‰í•  ìˆ«ìë¥¼ ìë™ìœ¼ë¡œ ${searchTarget}ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤!`);
                    } else {
                        const searchValue = parseInt(searchInput);
                        if (isNaN(searchValue)) {
                            alert('ì°¾ì„ ìˆ«ìë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                            return;
                        }
                        searchTarget = searchValue;
                    }
                    
                    // ì´ì§„íƒìƒ‰ì˜ ê²½ìš° ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ì •ë ¬
                    if (currentAlgorithm === 'binary') {
                        const originalOrder = [...currentData];
                        currentData.sort((a, b) => a - b);
                        originalData = [...currentData]; // ì •ë ¬ëœ ìƒíƒœë¥¼ ì›ë³¸ìœ¼ë¡œ ì €ì¥
                        
                        // ì •ë ¬ ì•ˆë‚´ ë©”ì‹œì§€
                        updateStepInfo(`ì´ì§„íƒìƒ‰ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ì •ë ¬í–ˆìŠµë‹ˆë‹¤: [${originalOrder.join(',')}] â†’ [${currentData.join(',')}]`);
                    }
                }

                // í•­ìƒ ì‹œê°í™” ì—…ë°ì´íŠ¸
                visualizeData();
                enableControls();
                
                if (currentAlgorithm === 'linear' || currentAlgorithm === 'binary') {
                    if (!document.getElementById('searchInput').value.trim()) {
                        updateStepInfo(`ë°ì´í„°ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ${searchTarget}ì„ ì°¾ì•„ë³´ì„¸ìš”!`);
                    } else {
                        updateStepInfo(`ë°ì´í„°ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ${searchTarget}ì„ ì°¾ì•„ë³´ì„¸ìš”!`);
                    }
                } else {
                    updateStepInfo('ë°ì´í„°ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•´ë³´ì„¸ìš”!');
                }
                updateProgressBar(0);
                
            } catch (error) {
                alert('ì˜¬ë°”ë¥¸ ìˆ«ì í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”! (ì˜ˆ: 5,2,8,1,9)');
            }
        }

        // ë°ì´í„° ì‹œê°í™” (ê°œì„ ëœ ë²„ì „)
        function visualizeData(animateChanges = false) {
            const container = document.getElementById('dataVisualization');
            container.innerHTML = '';

            currentData.forEach((value, index) => {
                const blockWrapper = document.createElement('div');
                blockWrapper.className = 'block-wrapper relative flex flex-col items-center';
                blockWrapper.style.position = 'relative';
                blockWrapper.style.transition = 'transform 0.6s ease-in-out';
                blockWrapper.id = `wrapper-${index}`;
                
                // ì¸ë±ìŠ¤ í‘œì‹œ
                const indexLabel = document.createElement('div');
                indexLabel.className = 'text-sm text-gray-600 font-bold mb-2 bg-gray-100 px-2 py-1 rounded-full';
                indexLabel.textContent = `[${index}]`;
                
                // ë©”ì¸ ë¸”ë¡
                const block = document.createElement('div');
                block.className = 'data-block bg-gradient-to-br from-blue-400 to-purple-500 text-white rounded-xl p-4 min-w-16 text-center font-bold text-xl shadow-lg transition-all duration-500 hover:scale-105 relative';
                block.textContent = value;
                block.id = `block-${index}`;
                
                // ê°’ í¬ê¸° í‘œì‹œ (ìˆ«ì ì•„ë˜ ì‘ì€ ë°”)
                const valueIndicator = document.createElement('div');
                valueIndicator.className = 'absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-white/30 rounded-full';
                const maxValue = Math.max(...currentData);
                const minValue = Math.min(...currentData);
                const normalizedValue = maxValue === minValue ? 0.5 : (value - minValue) / (maxValue - minValue);
                valueIndicator.style.width = `${Math.max(20, normalizedValue * 40)}px`;
                valueIndicator.style.height = '4px';
                
                // ê°’ í‘œì‹œ (ë¸”ë¡ ìœ„ì—)
                const valueLabel = document.createElement('div');
                valueLabel.className = 'text-xs text-gray-500 font-medium mb-1';
                valueLabel.textContent = `ê°’: ${value}`;
                
                block.appendChild(valueIndicator);
                blockWrapper.appendChild(indexLabel);
                blockWrapper.appendChild(valueLabel);
                blockWrapper.appendChild(block);
                
                // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                if (animateChanges) {
                    blockWrapper.style.opacity = '0';
                    blockWrapper.style.transform = 'translateY(-20px)';
                    setTimeout(() => {
                        blockWrapper.style.opacity = '1';
                        blockWrapper.style.transform = 'translateY(0)';
                    }, index * 100);
                }
                
                container.appendChild(blockWrapper);
            });
        }

        // ë‘ ë¸”ë¡ì˜ ìœ„ì¹˜ë¥¼ ì‹œê°ì ìœ¼ë¡œ êµí™˜í•˜ëŠ” í•¨ìˆ˜
        async function animateSwap(index1, index2) {
            const wrapper1 = document.getElementById(`wrapper-${index1}`);
            const wrapper2 = document.getElementById(`wrapper-${index2}`);
            
            if (!wrapper1 || !wrapper2) return;

            // ë‘ ë¸”ë¡ì˜ í˜„ì¬ ìœ„ì¹˜ ê³„ì‚°
            const rect1 = wrapper1.getBoundingClientRect();
            const rect2 = wrapper2.getBoundingClientRect();
            const distance = rect2.left - rect1.left;

            // z-index ì„¤ì •ìœ¼ë¡œ ê²¹ì¹¨ ë°©ì§€
            wrapper1.style.zIndex = '20';
            wrapper2.style.zIndex = '20';

            // êµí™˜ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰ (í•œ ë²ˆë§Œ)
            wrapper1.style.transition = 'transform 0.6s ease-in-out';
            wrapper2.style.transition = 'transform 0.6s ease-in-out';
            wrapper1.style.transform = `translateX(${distance}px) translateY(-20px)`;
            wrapper2.style.transform = `translateX(${-distance}px) translateY(-20px)`;

            // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ ëŒ€ê¸°
            await sleep(600);

            // ì‹¤ì œ DOM ìš”ì†Œë“¤ì˜ ë‚´ìš© êµí™˜
            const temp1Content = wrapper1.innerHTML;
            const temp1Id = wrapper1.id;
            
            wrapper1.innerHTML = wrapper2.innerHTML;
            wrapper1.id = wrapper2.id;
            wrapper2.innerHTML = temp1Content;
            wrapper2.id = temp1Id;

            // ID ì—…ë°ì´íŠ¸
            const block1 = wrapper1.querySelector('.data-block');
            const block2 = wrapper2.querySelector('.data-block');
            if (block1) block1.id = `block-${index1}`;
            if (block2) block2.id = `block-${index2}`;

            // ìœ„ì¹˜ ì´ˆê¸°í™” (transition ì œê±° í›„)
            wrapper1.style.transition = '';
            wrapper2.style.transition = '';
            wrapper1.style.transform = '';
            wrapper2.style.transform = '';
            wrapper1.style.zIndex = '1';
            wrapper2.style.zIndex = '1';

            await sleep(100);
        }

        // ì œì–´ ë²„íŠ¼ í™œì„±í™”
        function enableControls() {
            document.getElementById('playBtn').disabled = false;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('stepBtn').disabled = false;
        }

        // ì œì–´ ë²„íŠ¼ ë¹„í™œì„±í™”
        function disableControls() {
            document.getElementById('playBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('resetBtn').disabled = true;
            document.getElementById('stepBtn').disabled = true;
        }
        
        // íŠœí† ë¦¬ì–¼ í‘œì‹œ
        function showTutorial() {
            document.getElementById('tutorialModal').classList.remove('hidden');
            document.getElementById('tutorialModal').classList.add('flex');
        }
        
        function closeTutorial() {
            document.getElementById('tutorialModal').classList.add('hidden');
            document.getElementById('tutorialModal').classList.remove('flex');
        }

        // í€´ì¦ˆ ê´€ë ¨ ë³€ìˆ˜ë“¤
        let currentQuizIndex = 0;
        let quizScore = 0;
        let quizQuestions = [];

        // í€´ì¦ˆ ë¬¸ì œ ë°ì´í„°
        const allQuizQuestions = [
            {
                question: "ë²„ë¸”ì •ë ¬ì—ì„œ ì¸ì ‘í•œ ë‘ ì›ì†Œë¥¼ ë¹„êµí•  ë•Œ, í° ìˆ˜ê°€ ë’¤ë¡œ ì´ë™í•˜ëŠ” ê³¼ì •ì„ ë¬´ì—‡ì— ë¹„ìœ í–ˆë‚˜ìš”?",
                options: ["ê±°í’ˆì´ ë¬¼ ìœ„ë¡œ ì˜¬ë¼ì˜¤ëŠ” ê²ƒ", "ëŒì´ ë°”ë‹¥ìœ¼ë¡œ ê°€ë¼ì•‰ëŠ” ê²ƒ", "ë°”ëŒì´ ë¶€ëŠ” ê²ƒ", "ë¬¼ì´ íë¥´ëŠ” ê²ƒ"],
                correct: 0,
                explanation: "ë²„ë¸”ì •ë ¬ì€ ê±°í’ˆ(bubble)ì´ ë¬¼ ìœ„ë¡œ ì˜¬ë¼ì˜¤ë“¯ì´ í° ìˆ˜ê°€ ë’¤ë¡œ ì´ë™í•˜ëŠ” ëª¨ìŠµì—ì„œ ì´ë¦„ì´ ë¶™ì—ˆì–´ìš”! ğŸ«§"
            },
            {
                question: "ì„ íƒì •ë ¬ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
                options: ["ì¸ì ‘í•œ ì›ì†Œë¼ë¦¬ ë¹„êµí•˜ê¸°", "ê°€ì¥ ì‘ì€(ë˜ëŠ” í°) ì›ì†Œë¥¼ ì°¾ì•„ì„œ ì•ìë¦¬ì— ë°°ì¹˜í•˜ê¸°", "ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ê¸°", "ë¬´ì‘ìœ„ë¡œ ì›ì†Œ ì„ íƒí•˜ê¸°"],
                correct: 1,
                explanation: "ì„ íƒì •ë ¬ì€ ë§¤ë²ˆ ê°€ì¥ ì‘ì€(ë˜ëŠ” í°) ì›ì†Œë¥¼ 'ì„ íƒ'í•´ì„œ ì •ë ¬ëœ ë¶€ë¶„ì˜ ë§¨ ë’¤ì— ë°°ì¹˜í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ì—ìš”! ğŸ¯"
            },
            {
                question: "ë‹¤ìŒ ì¤‘ ì´ì§„íƒìƒ‰ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ëŠ”?",
                options: ["ì •ë ¬ëœ ë°°ì—´", "ì •ë ¬ë˜ì§€ ì•Šì€ ë°°ì—´", "í¬ê¸°ê°€ í° ë°°ì—´", "ìˆ«ìë¡œë§Œ ì´ë£¨ì–´ì§„ ë°°ì—´"],
                correct: 1,
                explanation: "ì´ì§„íƒìƒ‰ì€ ë°˜ë“œì‹œ ì •ë ¬ëœ ë°°ì—´ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”! ì •ë ¬ë˜ì§€ ì•Šì€ ë°°ì—´ì—ì„œëŠ” ìˆœì°¨íƒìƒ‰ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. âš¡"
            },
            {
                question: "ìˆœì°¨íƒìƒ‰ì˜ ì¥ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: ["ê°€ì¥ ë¹ ë¥¸ íƒìƒ‰ ì†ë„", "ì •ë ¬ëœ ë°ì´í„°ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥", "ì •ë ¬ë˜ì§€ ì•Šì€ ë°ì´í„°ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥", "ë©”ëª¨ë¦¬ë¥¼ ì ê²Œ ì‚¬ìš©"],
                correct: 2,
                explanation: "ìˆœì°¨íƒìƒ‰ì€ ë°ì´í„°ê°€ ì •ë ¬ë˜ì–´ ìˆì§€ ì•Šì•„ë„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ê°€ì¥ í° ì¥ì ì´ì—ìš”! ğŸ”"
            },
            {
                question: "ë°°ì—´ [64, 34, 25, 12, 22, 11, 90]ì—ì„œ ë²„ë¸”ì •ë ¬ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬í•  ë•Œ, ì²« ë²ˆì§¸ íŒ¨ìŠ¤(pass) í›„ ê°€ì¥ ë’¤ì— ì˜¬ ìˆ«ìëŠ”?",
                options: ["11", "64", "90", "34"],
                correct: 2,
                explanation: "ë²„ë¸”ì •ë ¬ì—ì„œ ì²« ë²ˆì§¸ íŒ¨ìŠ¤ê°€ ëë‚˜ë©´ ê°€ì¥ í° ìˆ˜ì¸ 90ì´ ë§¨ ë’¤ë¡œ ì´ë™í•´ìš”! ğŸ«§"
            },
            {
                question: "ì´ì§„íƒìƒ‰ì—ì„œ ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ì´ìœ ëŠ”?",
                options: ["ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•˜ê¸° ìœ„í•´", "íƒìƒ‰ ë²”ìœ„ë¥¼ ì ˆë°˜ì”© ì¤„ì—¬ì„œ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•´", "ì •ë ¬ì„ ìœ„í•´", "ë¬´ì‘ìœ„ì„±ì„ ìœ„í•´"],
                correct: 1,
                explanation: "ì´ì§„íƒìƒ‰ì€ ë§¤ë²ˆ íƒìƒ‰ ë²”ìœ„ë¥¼ ì ˆë°˜ìœ¼ë¡œ ì¤„ì—¬ì„œ O(log n)ì˜ ë¹ ë¥¸ ì†ë„ë¡œ ì›ì†Œë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ìš”! âš¡"
            },
            {
                question: "ì„ íƒì •ë ¬ì—ì„œ ë°°ì—´ [5, 2, 8, 1, 9]ë¥¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•  ë•Œ, ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œ ì„ íƒë  ìˆ«ìëŠ”?",
                options: ["5", "2", "1", "9"],
                correct: 2,
                explanation: "ì„ íƒì •ë ¬ì—ì„œëŠ” ë§¤ë²ˆ ê°€ì¥ ì‘ì€ ìˆ˜ë¥¼ ì„ íƒí•˜ë¯€ë¡œ, ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” 1ì´ ì„ íƒë˜ì–´ ë§¨ ì•ìœ¼ë¡œ ì´ë™í•´ìš”! ğŸ¯"
            },
            {
                question: "ë‹¤ìŒ ì¤‘ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì´ ì•„ë‹Œ ê²ƒì€?",
                options: ["ë²„ë¸”ì •ë ¬", "ì„ íƒì •ë ¬", "ìˆœì°¨íƒìƒ‰", "ì‚½ì…ì •ë ¬"],
                correct: 2,
                explanation: "ìˆœì°¨íƒìƒ‰ì€ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì´ ì•„ë‹ˆë¼ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì´ì—ìš”! ë°°ì—´ì—ì„œ íŠ¹ì • ê°’ì„ ì°¾ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ğŸ”"
            }
        ];

        // í€´ì¦ˆ í‘œì‹œ
        function showQuiz() {
            // ëœë¤í•˜ê²Œ 5ê°œ ë¬¸ì œ ì„ íƒ
            const shuffled = [...allQuizQuestions].sort(() => 0.5 - Math.random());
            quizQuestions = shuffled.slice(0, 5);
            
            currentQuizIndex = 0;
            quizScore = 0;
            
            document.getElementById('quizModal').classList.remove('hidden');
            document.getElementById('quizModal').classList.add('flex');
            document.getElementById('quizResult').classList.add('hidden');
            document.getElementById('quizContent').classList.remove('hidden');
            document.getElementById('quizControls').classList.remove('hidden');
            
            displayQuestion();
        }

        // ë¬¸ì œ í‘œì‹œ
        function displayQuestion() {
            const question = quizQuestions[currentQuizIndex];
            const progress = ((currentQuizIndex + 1) / quizQuestions.length) * 100;
            
            document.getElementById('quizProgress').textContent = `${currentQuizIndex + 1} / ${quizQuestions.length}`;
            document.getElementById('quizProgressBar').style.width = `${progress}%`;
            
            const quizContent = document.getElementById('quizContent');
            quizContent.innerHTML = `
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">ë¬¸ì œ ${currentQuizIndex + 1}</h4>
                    <p class="text-lg text-gray-700 mb-6">${question.question}</p>
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <button onclick="selectAnswer(${index})" 
                                    class="quiz-option w-full text-left p-4 bg-white rounded-xl border-2 border-gray-200 hover:border-purple-300 hover:bg-purple-50 transition-all duration-300 font-medium">
                                ${index + 1}. ${option}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // ë‹µ ì„ íƒ
        function selectAnswer(selectedIndex) {
            const question = quizQuestions[currentQuizIndex];
            const options = document.querySelectorAll('.quiz-option');
            
            // ëª¨ë“  ì˜µì…˜ ë¹„í™œì„±í™”
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            // ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('bg-green-100', 'border-green-400', 'text-green-800');
                    option.innerHTML += ' âœ…';
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('bg-red-100', 'border-red-400', 'text-red-800');
                    option.innerHTML += ' âŒ';
                }
            });
            
            // ì ìˆ˜ ê³„ì‚°
            if (selectedIndex === question.correct) {
                quizScore++;
            }
            
            // ì„¤ëª… í‘œì‹œ
            const quizContent = document.getElementById('quizContent');
            quizContent.innerHTML += `
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-xl mt-4">
                    <div class="flex items-start">
                        <div class="text-2xl mr-3">ğŸ’¡</div>
                        <div>
                            <h5 class="font-bold text-yellow-800 mb-2">ì„¤ëª…</h5>
                            <p class="text-yellow-700">${question.explanation}</p>
                        </div>
                    </div>
                </div>
            `;
            
            // ë‹¤ìŒ ë²„íŠ¼ í‘œì‹œ
            setTimeout(() => {
                const nextButton = currentQuizIndex < quizQuestions.length - 1 ? 
                    `<button onclick="nextQuestion()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300 mt-4">
                        ë‹¤ìŒ ë¬¸ì œ â¡ï¸
                    </button>` :
                    `<button onclick="showQuizResult()" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300 mt-4">
                        ê²°ê³¼ ë³´ê¸° ğŸ‰
                    </button>`;
                
                quizContent.innerHTML += `<div class="text-center">${nextButton}</div>`;
            }, 1000);
        }

        // ë‹¤ìŒ ë¬¸ì œ
        function nextQuestion() {
            currentQuizIndex++;
            displayQuestion();
        }

        // í€´ì¦ˆ ê²°ê³¼ í‘œì‹œ
        function showQuizResult() {
            document.getElementById('quizContent').classList.add('hidden');
            document.getElementById('quizControls').classList.add('hidden');
            document.getElementById('quizResult').classList.remove('hidden');
            
            const percentage = Math.round((quizScore / quizQuestions.length) * 100);
            
            // ê²°ê³¼ì— ë”°ë¥¸ ì´ëª¨ì§€ì™€ ë©”ì‹œì§€
            let emoji, title, message;
            if (percentage === 100) {
                emoji = 'ğŸ†';
                title = 'ì™„ë²½í•´ìš”!';
                message = 'ì•Œê³ ë¦¬ì¦˜ ë§ˆìŠ¤í„°! ëª¨ë“  ë¬¸ì œë¥¼ ë§í˜”ì–´ìš”!';
            } else if (percentage >= 80) {
                emoji = 'ğŸ‰';
                title = 'í›Œë¥­í•´ìš”!';
                message = 'ì•Œê³ ë¦¬ì¦˜ì„ ì˜ ì´í•´í•˜ê³  ìˆì–´ìš”!';
            } else if (percentage >= 60) {
                emoji = 'ğŸ‘';
                title = 'ì¢‹ì•„ìš”!';
                message = 'ì¡°ê¸ˆë§Œ ë” ê³µë¶€í•˜ë©´ ì™„ë²½í•  ê±°ì˜ˆìš”!';
            } else {
                emoji = 'ğŸ“š';
                title = 'ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!';
                message = 'ì•Œê³ ë¦¬ì¦˜ì„ ë‹¤ì‹œ í•œ ë²ˆ í•™ìŠµí•´ë³´ì„¸ìš”!';
            }
            
            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('finalScore').textContent = `${quizScore} / ${quizQuestions.length}`;
            document.getElementById('scoreMessage').textContent = message;
        }

        // í€´ì¦ˆ ë‹¤ì‹œ ì‹œì‘
        function restartQuiz() {
            showQuiz();
        }

        // í€´ì¦ˆ ë‹«ê¸°
        function closeQuiz() {
            document.getElementById('quizModal').classList.add('hidden');
            document.getElementById('quizModal').classList.remove('flex');
        }
        
        // í•™ìŠµ í˜„í™© í‘œì‹œ
        function showProgress() {
            alert('ğŸ“Š í•™ìŠµ í˜„í™©\n\në²„ë¸”ì •ë ¬: 3íšŒ ì™„ë£Œ âœ…\nì„ íƒì •ë ¬: 1íšŒ ì™„ë£Œ âœ…\nìˆœì°¨íƒìƒ‰: 2íšŒ ì™„ë£Œ âœ…\nì´ì§„íƒìƒ‰: ì•„ì§ ì•ˆ í•´ë´¤ì–´ìš”! ğŸ¯\n\ní€´ì¦ˆ ì •ë‹µë¥ : 85% ğŸ‰');
        }
        
        // ë„ì›€ë§ í‘œì‹œ
        function showHelp() {
            alert('â“ ë„ì›€ë§\n\nğŸ«§ ë²„ë¸”ì •ë ¬: ì¸ì ‘í•œ ë‘ ì›ì†Œë¥¼ ë¹„êµí•˜ì—¬ ì •ë ¬\nğŸ¯ ì„ íƒì •ë ¬: ìµœì†Ÿê°’ì„ ì°¾ì•„ ì•ìë¦¬ì™€ êµí™˜\nğŸ” ìˆœì°¨íƒìƒ‰: ì²˜ìŒë¶€í„° ëê¹Œì§€ í•˜ë‚˜ì”© í™•ì¸\nâš¡ ì´ì§„íƒìƒ‰: ì •ë ¬ëœ ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ íƒìƒ‰\n\në” ìì„¸í•œ ì„¤ëª…ì€ ê° ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•´ì„œ í™•ì¸í•´ë³´ì„¸ìš”! ğŸ˜Š');
        }
        
        // ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
        function startSimulation() {
            if (currentData.length === 0) {
                alert('ë¨¼ì € ë°ì´í„°ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”!');
                return;
            }

            isRunning = true;
            document.getElementById('playBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            
            // ì•Œê³ ë¦¬ì¦˜ë³„ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
            switch (currentAlgorithm) {
                case 'bubble':
                    runBubbleSort();
                    break;
                case 'selection':
                    runSelectionSort();
                    break;
                case 'linear':
                    runLinearSearch();
                    break;
                case 'binary':
                    runBinarySearch();
                    break;
            }
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì¼ì‹œì •ì§€
        function pauseSimulation() {
            isRunning = false;
            document.getElementById('playBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì´ˆê¸°í™”
        function resetSimulation() {
            isRunning = false;
            stepMode = false;
            stepGenerator = null;
            currentStep = 0;
            totalSteps = 0;
            
            if (originalData.length > 0) {
                currentData = [...originalData];
                // ì´ì§„íƒìƒ‰ì˜ ê²½ìš° ë‹¤ì‹œ ì •ë ¬
                if (currentAlgorithm === 'binary') {
                    currentData.sort((a, b) => a - b);
                }
                visualizeData();
                enableControls();
                updateStepInfo('ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•´ë³´ì„¸ìš”!');
            } else {
                disableControls();
                updateStepInfo('ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
            }
            
            updateProgressBar(0);
            clearHighlights();
        }

        // í•œ ë‹¨ê³„ì”© ì‹¤í–‰ì„ ìœ„í•œ ì „ì—­ ë³€ìˆ˜ë“¤
        let stepMode = false;
        let stepGenerator = null;

        // í•œ ë‹¨ê³„ì”© ì‹¤í–‰
        function nextStep() {
            if (currentData.length === 0) {
                alert('ë¨¼ì € ë°ì´í„°ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”!');
                return;
            }

            if (!stepMode) {
                // ë‹¨ê³„ë³„ ëª¨ë“œ ì‹œì‘
                stepMode = true;
                isRunning = false;
                
                // ì•Œê³ ë¦¬ì¦˜ë³„ ì œë„ˆë ˆì´í„° ìƒì„±
                switch (currentAlgorithm) {
                    case 'bubble':
                        stepGenerator = bubbleSortGenerator();
                        break;
                    case 'selection':
                        stepGenerator = selectionSortGenerator();
                        break;
                    case 'linear':
                        stepGenerator = linearSearchGenerator();
                        break;
                    case 'binary':
                        stepGenerator = binarySearchGenerator();
                        break;
                }
                
                document.getElementById('playBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = true;
                updateStepInfo('ë‹¨ê³„ë³„ ì‹¤í–‰ ëª¨ë“œì…ë‹ˆë‹¤. "í•œ ë‹¨ê³„" ë²„íŠ¼ì„ ê³„ì† ëˆŒëŸ¬ë³´ì„¸ìš”!');
            }

            // ë‹¤ìŒ ë‹¨ê³„ ì‹¤í–‰
            if (stepGenerator) {
                const result = stepGenerator.next();
                if (result.done) {
                    stepMode = false;
                    stepGenerator = null;
                    document.getElementById('playBtn').disabled = false;
                    updateStepInfo('ğŸ‰ ì•Œê³ ë¦¬ì¦˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            }
        }

        // ë²„ë¸”ì •ë ¬ ì‹¤í–‰
        async function runBubbleSort() {
            const n = currentData.length;
            const sortOrder = getSortOrder();
            const isAscending = sortOrder === 'asc';
            totalSteps = (n * (n - 1)) / 2;
            currentStep = 0;

            updateStepInfo(`${isAscending ? 'ğŸ”¼ ì˜¤ë¦„ì°¨ìˆœ' : 'ğŸ”½ ë‚´ë¦¼ì°¨ìˆœ'} ë²„ë¸”ì •ë ¬ì„ ì‹œì‘í•©ë‹ˆë‹¤!`);
            await sleep(animationSpeed / 2);

            for (let i = 0; i < n - 1; i++) {
                for (let j = 0; j < n - i - 1; j++) {
                    if (!isRunning) return;

                    // í˜„ì¬ ë¹„êµí•˜ëŠ” ì›ì†Œë“¤ ê°•ì¡°
                    highlightBlocks([j, j + 1], 'comparing');
                    updateStepInfo(`${currentData[j]}ê³¼ ${currentData[j + 1]}ì„ ë¹„êµí•©ë‹ˆë‹¤.`);
                    
                    await sleep(animationSpeed);
                    
                    // ì •ë ¬ ë°©í–¥ì— ë”°ë¥¸ ë¹„êµ ì¡°ê±´
                    const shouldSwap = isAscending ? 
                        currentData[j] > currentData[j + 1] : 
                        currentData[j] < currentData[j + 1];
                    
                    if (shouldSwap) {
                        // êµí™˜ ì• ë‹ˆë©”ì´ì…˜
                        highlightBlocks([j, j + 1], 'swapping');
                        const reason = isAscending ? 
                            `${currentData[j]}ì´ ë” í¬ë¯€ë¡œ ${currentData[j + 1]}ì™€ ìœ„ì¹˜ë¥¼ ë°”ê¿‰ë‹ˆë‹¤.` :
                            `${currentData[j]}ì´ ë” ì‘ìœ¼ë¯€ë¡œ ${currentData[j + 1]}ì™€ ìœ„ì¹˜ë¥¼ ë°”ê¿‰ë‹ˆë‹¤.`;
                        updateStepInfo(reason);
                        
                        // ì‹¤ì œ ë°ì´í„° êµí™˜
                        [currentData[j], currentData[j + 1]] = [currentData[j + 1], currentData[j]];
                        
                        // ì‹œê°ì  êµí™˜ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
                        await animateSwap(j, j + 1);
                    } else {
                        // êµí™˜í•˜ì§€ ì•Šì„ ë•ŒëŠ” ì ê¹ ëŒ€ê¸°ë§Œ
                        const reason = isAscending ? 
                            `${currentData[j]} â‰¤ ${currentData[j + 1]}ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.` :
                            `${currentData[j]} â‰¥ ${currentData[j + 1]}ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.`;
                        updateStepInfo(reason);
                        await sleep(animationSpeed / 2);
                    }
                    
                    currentStep++;
                    updateProgressBar((currentStep / totalSteps) * 100);
                    
                    // ê°•ì¡° í•´ì œ
                    clearHighlights();
                    await sleep(animationSpeed / 2);
                }
                
                // ì •ë ¬ëœ ì›ì†Œ í‘œì‹œ
                highlightBlocks([n - i - 1], 'sorted');
            }
            
            // ëª¨ë“  ì›ì†Œê°€ ì •ë ¬ë¨ í‘œì‹œ
            highlightBlocks(Array.from({length: n}, (_, i) => i), 'sorted');
            updateStepInfo(`ğŸ‰ ${isAscending ? 'ì˜¤ë¦„ì°¨ìˆœ' : 'ë‚´ë¦¼ì°¨ìˆœ'} ë²„ë¸”ì •ë ¬ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
            isRunning = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        // ì„ íƒì •ë ¬ ì‹¤í–‰
        async function runSelectionSort() {
            const n = currentData.length;
            const sortOrder = getSortOrder();
            const isAscending = sortOrder === 'asc';
            totalSteps = n;
            currentStep = 0;

            updateStepInfo(`${isAscending ? 'ğŸ”¼ ì˜¤ë¦„ì°¨ìˆœ' : 'ğŸ”½ ë‚´ë¦¼ì°¨ìˆœ'} ì„ íƒì •ë ¬ì„ ì‹œì‘í•©ë‹ˆë‹¤!`);
            await sleep(animationSpeed / 2);

            for (let i = 0; i < n - 1; i++) {
                if (!isRunning) return;

                let targetIndex = i;
                highlightBlocks([i], 'current');
                const targetType = isAscending ? 'ê°€ì¥ ì‘ì€' : 'ê°€ì¥ í°';
                updateStepInfo(`ìœ„ì¹˜ ${i}ì— ë“¤ì–´ê°ˆ ${targetType} ê°’ì„ ì°¾ìŠµë‹ˆë‹¤.`);
                
                await sleep(animationSpeed);

                // ìµœì†Ÿê°’/ìµœëŒ“ê°’ ì°¾ê¸°
                for (let j = i + 1; j < n; j++) {
                    if (!isRunning) return;
                    
                    highlightBlocks([j], 'comparing');
                    const currentTarget = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                    updateStepInfo(`${currentData[j]}ì„ í˜„ì¬ ${currentTarget} ${currentData[targetIndex]}ì™€ ë¹„êµí•©ë‹ˆë‹¤.`);
                    
                    await sleep(animationSpeed / 2);
                    
                    // ì •ë ¬ ë°©í–¥ì— ë”°ë¥¸ ë¹„êµ ì¡°ê±´
                    const shouldUpdate = isAscending ? 
                        currentData[j] < currentData[targetIndex] : 
                        currentData[j] > currentData[targetIndex];
                    
                    if (shouldUpdate) {
                        clearHighlights();
                        targetIndex = j;
                        highlightBlocks([targetIndex], 'minimum');
                        const newTarget = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                        updateStepInfo(`ìƒˆë¡œìš´ ${newTarget} ${currentData[targetIndex]}ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                        await sleep(animationSpeed / 2);
                    }
                }

                // êµí™˜
                if (targetIndex !== i) {
                    highlightBlocks([i, targetIndex], 'swapping');
                    const targetType = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                    updateStepInfo(`${targetType} ${currentData[targetIndex]}ì„ ìœ„ì¹˜ ${i}ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
                    
                    // ì‹¤ì œ ë°ì´í„° êµí™˜
                    [currentData[i], currentData[targetIndex]] = [currentData[targetIndex], currentData[i]];
                    
                    // ì‹œê°ì  êµí™˜ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
                    await animateSwap(i, targetIndex);
                } else {
                    // êµí™˜í•  í•„ìš”ê°€ ì—†ì„ ë•Œ
                    const targetType = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                    updateStepInfo(`ìœ„ì¹˜ ${i}ì˜ ${currentData[i]}ì´ ì´ë¯¸ ${targetType}ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.`);
                    await sleep(animationSpeed / 2);
                }

                // ì •ë ¬ëœ ì›ì†Œ í‘œì‹œ
                highlightBlocks([i], 'sorted');
                currentStep++;
                updateProgressBar((currentStep / totalSteps) * 100);
                
                await sleep(animationSpeed / 2);
            }

            // ëª¨ë“  ì›ì†Œê°€ ì •ë ¬ë¨ í‘œì‹œ
            highlightBlocks(Array.from({length: n}, (_, i) => i), 'sorted');
            updateStepInfo(`ğŸ‰ ${isAscending ? 'ì˜¤ë¦„ì°¨ìˆœ' : 'ë‚´ë¦¼ì°¨ìˆœ'} ì„ íƒì •ë ¬ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
            isRunning = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        // ìˆœì°¨íƒìƒ‰ ì‹¤í–‰
        async function runLinearSearch() {
            totalSteps = currentData.length;
            currentStep = 0;

            updateStepInfo(`${searchTarget}ì„ ì°¾ê¸° ìœ„í•´ ì²˜ìŒë¶€í„° í•˜ë‚˜ì”© í™•ì¸í•©ë‹ˆë‹¤. (ì •ë ¬ë˜ì§€ ì•Šì€ ë°ì´í„°ë„ íƒìƒ‰ ê°€ëŠ¥!)`);
            await sleep(animationSpeed);

            for (let i = 0; i < currentData.length; i++) {
                if (!isRunning) return;

                highlightBlocks([i], 'comparing');
                updateStepInfo(`ìœ„ì¹˜ ${i}: ${currentData[i]}ì„ í™•ì¸í•©ë‹ˆë‹¤.`);
                
                await sleep(animationSpeed);

                currentStep++;
                updateProgressBar((currentStep / totalSteps) * 100);

                if (currentData[i] === searchTarget) {
                    highlightBlocks([i], 'found');
                    updateStepInfo(`ğŸ‰ ${searchTarget}ì„ ìœ„ì¹˜ ${i}ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                    isRunning = false;
                    document.getElementById('pauseBtn').disabled = true;
                    return;
                }

                await sleep(animationSpeed / 2);
            }

            clearHighlights();
            updateStepInfo(`ğŸ˜ ${searchTarget}ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
            isRunning = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        // ì´ì§„íƒìƒ‰ ì‹¤í–‰
        async function runBinarySearch() {
            let left = 0;
            let right = currentData.length - 1;
            totalSteps = Math.ceil(Math.log2(currentData.length));
            currentStep = 0;

            updateStepInfo(`ì •ë ¬ëœ ë°°ì—´ì—ì„œ ${searchTarget}ì„ ì´ì§„íƒìƒ‰ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤. (ì´ì§„íƒìƒ‰ì€ ë°˜ë“œì‹œ ì •ë ¬ëœ ë°ì´í„°ê°€ í•„ìš”í•´ìš”!)`);
            await sleep(animationSpeed);

            while (left <= right) {
                if (!isRunning) return;

                const mid = Math.floor((left + right) / 2);
                
                // íƒìƒ‰ ë²”ìœ„ í‘œì‹œ
                highlightBlocks(Array.from({length: right - left + 1}, (_, i) => left + i), 'range');
                await sleep(animationSpeed / 2);
                
                // ì¤‘ê°„ê°’ ê°•ì¡°
                highlightBlocks([mid], 'comparing');
                updateStepInfo(`ì¤‘ê°„ ìœ„ì¹˜ ${mid}: ${currentData[mid]}ì„ í™•ì¸í•©ë‹ˆë‹¤.`);
                
                await sleep(animationSpeed);

                if (currentData[mid] === searchTarget) {
                    highlightBlocks([mid], 'found');
                    updateStepInfo(`ğŸ‰ ${searchTarget}ì„ ìœ„ì¹˜ ${mid}ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                    isRunning = false;
                    document.getElementById('pauseBtn').disabled = true;
                    return;
                } else if (currentData[mid] < searchTarget) {
                    updateStepInfo(`${currentData[mid]} < ${searchTarget}ì´ë¯€ë¡œ ì˜¤ë¥¸ìª½ ì ˆë°˜ì„ íƒìƒ‰í•©ë‹ˆë‹¤.`);
                    left = mid + 1;
                } else {
                    updateStepInfo(`${currentData[mid]} > ${searchTarget}ì´ë¯€ë¡œ ì™¼ìª½ ì ˆë°˜ì„ íƒìƒ‰í•©ë‹ˆë‹¤.`);
                    right = mid - 1;
                }

                currentStep++;
                updateProgressBar((currentStep / totalSteps) * 100);
                await sleep(animationSpeed);
            }

            clearHighlights();
            updateStepInfo(`ğŸ˜ ${searchTarget}ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
            isRunning = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        // ë¸”ë¡ ê°•ì¡° í‘œì‹œ (ê°œì„ ëœ ë²„ì „)
        function highlightBlocks(indices, type) {
            clearHighlights();
            
            const effects = {
                'comparing': {
                    gradient: 'from-yellow-400 to-orange-400',
                    transform: 'scale-110',
                    shadow: 'shadow-2xl',
                    animation: 'animate-pulse',
                    border: 'border-4 border-yellow-300'
                },
                'swapping': {
                    gradient: 'from-red-400 to-pink-400',
                    transform: 'scale-125 rotate-3',
                    shadow: 'shadow-2xl',
                    animation: 'animate-bounce',
                    border: 'border-4 border-red-300'
                },
                'sorted': {
                    gradient: 'from-green-400 to-emerald-400',
                    transform: 'scale-105',
                    shadow: 'shadow-xl',
                    animation: '',
                    border: 'border-4 border-green-300'
                },
                'current': {
                    gradient: 'from-blue-400 to-indigo-400',
                    transform: 'scale-110',
                    shadow: 'shadow-xl',
                    animation: 'animate-pulse',
                    border: 'border-4 border-blue-300'
                },
                'minimum': {
                    gradient: 'from-pink-500 to-rose-500',
                    transform: 'scale-115',
                    shadow: 'shadow-2xl',
                    animation: 'animate-pulse',
                    border: 'border-4 border-pink-400'
                },
                'found': {
                    gradient: 'from-green-400 to-emerald-400',
                    transform: 'scale-125',
                    shadow: 'shadow-2xl',
                    animation: 'animate-bounce',
                    border: 'border-4 border-green-300'
                },
                'range': {
                    gradient: 'from-gray-400 to-gray-500',
                    transform: 'scale-105',
                    shadow: 'shadow-lg',
                    animation: '',
                    border: 'border-2 border-gray-300'
                }
            };

            indices.forEach(index => {
                const block = document.getElementById(`block-${index}`);
                const wrapper = block?.parentElement;
                
                if (block && wrapper) {
                    const effect = effects[type];
                    
                    // ë¸”ë¡ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
                    block.className = `data-block bg-gradient-to-br ${effect.gradient} text-white rounded-xl p-4 min-w-16 text-center font-bold text-xl ${effect.shadow} ${effect.border} transition-all duration-500 hover:scale-105 relative transform ${effect.transform} ${effect.animation}`;
                    
                    // ë˜í¼ì— íŠ¹ë³„í•œ íš¨ê³¼ ì¶”ê°€
                    wrapper.style.zIndex = type === 'swapping' || type === 'found' ? '10' : '1';
                    
                    // ìƒíƒœë³„ ì¶”ê°€ ì‹œê°ì  íš¨ê³¼
                    if (type === 'found') {
                        // ì°¾ì•˜ì„ ë•Œ íŠ¹ë³„í•œ íš¨ê³¼
                        wrapper.style.filter = 'drop-shadow(0 0 20px rgba(34, 197, 94, 0.6))';
                        setTimeout(() => {
                            wrapper.style.filter = '';
                        }, 2000);
                    } else if (type === 'comparing') {
                        // ë¹„êµí•  ë•Œ ê¹œë¹¡ì´ëŠ” íš¨ê³¼
                        wrapper.style.filter = 'drop-shadow(0 0 15px rgba(251, 191, 36, 0.5))';
                    } else if (type === 'swapping') {
                        // êµí™˜í•  ë•Œ ê°•í•œ ê·¸ë¦¼ì
                        wrapper.style.filter = 'drop-shadow(0 0 20px rgba(239, 68, 68, 0.6))';
                    } else if (type === 'minimum') {
                        // ìµœì†Ÿê°’ì¼ ë•Œ ë¶„í™ìƒ‰ ê¸€ë¡œìš° íš¨ê³¼
                        wrapper.style.filter = 'drop-shadow(0 0 25px rgba(236, 72, 153, 0.8))';
                    }
                }
            });
        }

        // ê°•ì¡° í•´ì œ
        function clearHighlights() {
            const blocks = document.querySelectorAll('.data-block');
            const wrappers = document.querySelectorAll('.block-wrapper');
            
            blocks.forEach(block => {
                block.className = 'data-block bg-gradient-to-br from-blue-400 to-purple-500 text-white rounded-xl p-4 min-w-16 text-center font-bold text-xl shadow-lg transition-all duration-500 hover:scale-105 relative';
            });
            
            wrappers.forEach(wrapper => {
                wrapper.style.zIndex = '1';
                wrapper.style.filter = '';
            });
        }

        // ë‹¨ê³„ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateStepInfo(message) {
            document.getElementById('explanation').textContent = message;
        }

        // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸
        function updateProgressBar(percentage) {
            document.getElementById('progressBar').style.width = `${percentage}%`;
        }

        // ì§€ì—° í•¨ìˆ˜
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ë²„ë¸”ì •ë ¬ ì œë„ˆë ˆì´í„° (ë‹¨ê³„ë³„ ì‹¤í–‰ìš©)
        function* bubbleSortGenerator() {
            const n = currentData.length;
            const sortOrder = getSortOrder();
            const isAscending = sortOrder === 'asc';
            totalSteps = (n * (n - 1)) / 2;
            currentStep = 0;

            updateStepInfo(`${isAscending ? 'ğŸ”¼ ì˜¤ë¦„ì°¨ìˆœ' : 'ğŸ”½ ë‚´ë¦¼ì°¨ìˆœ'} ë²„ë¸”ì •ë ¬ì„ ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤!`);
            yield;

            for (let i = 0; i < n - 1; i++) {
                for (let j = 0; j < n - i - 1; j++) {
                    // í˜„ì¬ ë¹„êµí•˜ëŠ” ì›ì†Œë“¤ ê°•ì¡°
                    highlightBlocks([j, j + 1], 'comparing');
                    updateStepInfo(`${currentData[j]}ê³¼ ${currentData[j + 1]}ì„ ë¹„êµí•©ë‹ˆë‹¤.`);
                    yield;
                    
                    // ì •ë ¬ ë°©í–¥ì— ë”°ë¥¸ ë¹„êµ ì¡°ê±´
                    const shouldSwap = isAscending ? 
                        currentData[j] > currentData[j + 1] : 
                        currentData[j] < currentData[j + 1];
                    
                    if (shouldSwap) {
                        // êµí™˜ ì• ë‹ˆë©”ì´ì…˜
                        highlightBlocks([j, j + 1], 'swapping');
                        const reason = isAscending ? 
                            `${currentData[j]}ì´ ë” í¬ë¯€ë¡œ ${currentData[j + 1]}ì™€ ìœ„ì¹˜ë¥¼ ë°”ê¿‰ë‹ˆë‹¤.` :
                            `${currentData[j]}ì´ ë” ì‘ìœ¼ë¯€ë¡œ ${currentData[j + 1]}ì™€ ìœ„ì¹˜ë¥¼ ë°”ê¿‰ë‹ˆë‹¤.`;
                        updateStepInfo(reason);
                        
                        // ì‹¤ì œ ë°ì´í„° êµí™˜
                        [currentData[j], currentData[j + 1]] = [currentData[j + 1], currentData[j]];
                        
                        // ì‹œê°ì  êµí™˜ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰ (ì œë„ˆë ˆì´í„°ì—ì„œëŠ” ë™ê¸°ì ìœ¼ë¡œ)
                        const wrapper1 = document.getElementById(`wrapper-${j}`);
                        const wrapper2 = document.getElementById(`wrapper-${j + 1}`);
                        if (wrapper1 && wrapper2) {
                            const rect1 = wrapper1.getBoundingClientRect();
                            const rect2 = wrapper2.getBoundingClientRect();
                            const distance = rect2.left - rect1.left;
                            
                            wrapper1.style.zIndex = '20';
                            wrapper2.style.zIndex = '20';
                            wrapper1.style.transition = 'transform 0.6s ease-in-out';
                            wrapper2.style.transition = 'transform 0.6s ease-in-out';
                            wrapper1.style.transform = `translateX(${distance}px) translateY(-20px)`;
                            wrapper2.style.transform = `translateX(${-distance}px) translateY(-20px)`;
                            
                            setTimeout(() => {
                                const temp1Content = wrapper1.innerHTML;
                                wrapper1.innerHTML = wrapper2.innerHTML;
                                wrapper2.innerHTML = temp1Content;
                                
                                const block1 = wrapper1.querySelector('.data-block');
                                const block2 = wrapper2.querySelector('.data-block');
                                if (block1) block1.id = `block-${j}`;
                                if (block2) block2.id = `block-${j + 1}`;
                                
                                wrapper1.style.transition = '';
                                wrapper2.style.transition = '';
                                wrapper1.style.transform = '';
                                wrapper2.style.transform = '';
                                wrapper1.style.zIndex = '1';
                                wrapper2.style.zIndex = '1';
                            }, 600);
                        }
                        yield;
                    } else {
                        // êµí™˜í•˜ì§€ ì•Šì„ ë•ŒëŠ” ì„¤ëª…ë§Œ í‘œì‹œ
                        const reason = isAscending ? 
                            `${currentData[j]} â‰¤ ${currentData[j + 1]}ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.` :
                            `${currentData[j]} â‰¥ ${currentData[j + 1]}ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.`;
                        updateStepInfo(reason);
                        yield;
                    }
                    
                    currentStep++;
                    updateProgressBar((currentStep / totalSteps) * 100);
                    clearHighlights();
                }
                
                // ì •ë ¬ëœ ì›ì†Œ í‘œì‹œ
                highlightBlocks([n - i - 1], 'sorted');
                yield;
            }
            
            // ëª¨ë“  ì›ì†Œê°€ ì •ë ¬ë¨ í‘œì‹œ
            highlightBlocks(Array.from({length: n}, (_, i) => i), 'sorted');
            updateStepInfo(`ğŸ‰ ${isAscending ? 'ì˜¤ë¦„ì°¨ìˆœ' : 'ë‚´ë¦¼ì°¨ìˆœ'} ë²„ë¸”ì •ë ¬ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ì„ íƒì •ë ¬ ì œë„ˆë ˆì´í„° (ë‹¨ê³„ë³„ ì‹¤í–‰ìš©)
        function* selectionSortGenerator() {
            const n = currentData.length;
            const sortOrder = getSortOrder();
            const isAscending = sortOrder === 'asc';
            totalSteps = n;
            currentStep = 0;

            updateStepInfo(`${isAscending ? 'ğŸ”¼ ì˜¤ë¦„ì°¨ìˆœ' : 'ğŸ”½ ë‚´ë¦¼ì°¨ìˆœ'} ì„ íƒì •ë ¬ì„ ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤!`);
            yield;

            for (let i = 0; i < n - 1; i++) {
                let targetIndex = i;
                highlightBlocks([i], 'current');
                const targetType = isAscending ? 'ê°€ì¥ ì‘ì€' : 'ê°€ì¥ í°';
                updateStepInfo(`ìœ„ì¹˜ ${i}ì— ë“¤ì–´ê°ˆ ${targetType} ê°’ì„ ì°¾ìŠµë‹ˆë‹¤.`);
                yield;

                // ìµœì†Ÿê°’/ìµœëŒ“ê°’ ì°¾ê¸°
                for (let j = i + 1; j < n; j++) {
                    highlightBlocks([j], 'comparing');
                    const currentTarget = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                    updateStepInfo(`${currentData[j]}ì„ í˜„ì¬ ${currentTarget} ${currentData[targetIndex]}ì™€ ë¹„êµí•©ë‹ˆë‹¤.`);
                    yield;
                    
                    // ì •ë ¬ ë°©í–¥ì— ë”°ë¥¸ ë¹„êµ ì¡°ê±´
                    const shouldUpdate = isAscending ? 
                        currentData[j] < currentData[targetIndex] : 
                        currentData[j] > currentData[targetIndex];
                    
                    if (shouldUpdate) {
                        clearHighlights();
                        targetIndex = j;
                        highlightBlocks([targetIndex], 'minimum');
                        const newTarget = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                        updateStepInfo(`ìƒˆë¡œìš´ ${newTarget} ${currentData[targetIndex]}ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                        yield;
                    }
                }

                // êµí™˜
                if (targetIndex !== i) {
                    highlightBlocks([i, targetIndex], 'swapping');
                    const targetType = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                    updateStepInfo(`${targetType} ${currentData[targetIndex]}ì„ ìœ„ì¹˜ ${i}ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
                    
                    // ì‹¤ì œ ë°ì´í„° êµí™˜
                    [currentData[i], currentData[targetIndex]] = [currentData[targetIndex], currentData[i]];
                    
                    // ì‹œê°ì  êµí™˜ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰ (ì œë„ˆë ˆì´í„°ì—ì„œëŠ” ë™ê¸°ì ìœ¼ë¡œ)
                    const wrapper1 = document.getElementById(`wrapper-${i}`);
                    const wrapper2 = document.getElementById(`wrapper-${targetIndex}`);
                    if (wrapper1 && wrapper2) {
                        const rect1 = wrapper1.getBoundingClientRect();
                        const rect2 = wrapper2.getBoundingClientRect();
                        const distance = rect2.left - rect1.left;
                        
                        wrapper1.style.zIndex = '20';
                        wrapper2.style.zIndex = '20';
                        wrapper1.style.transition = 'transform 0.6s ease-in-out';
                        wrapper2.style.transition = 'transform 0.6s ease-in-out';
                        wrapper1.style.transform = `translateX(${distance}px) translateY(-20px)`;
                        wrapper2.style.transform = `translateX(${-distance}px) translateY(-20px)`;
                        
                        setTimeout(() => {
                            const temp1Content = wrapper1.innerHTML;
                            wrapper1.innerHTML = wrapper2.innerHTML;
                            wrapper2.innerHTML = temp1Content;
                            
                            const block1 = wrapper1.querySelector('.data-block');
                            const block2 = wrapper2.querySelector('.data-block');
                            if (block1) block1.id = `block-${i}`;
                            if (block2) block2.id = `block-${targetIndex}`;
                            
                            wrapper1.style.transition = '';
                            wrapper2.style.transition = '';
                            wrapper1.style.transform = '';
                            wrapper2.style.transform = '';
                            wrapper1.style.zIndex = '1';
                            wrapper2.style.zIndex = '1';
                        }, 600);
                    }
                    yield;
                } else {
                    // êµí™˜í•  í•„ìš”ê°€ ì—†ì„ ë•Œ
                    const targetType = isAscending ? 'ìµœì†Ÿê°’' : 'ìµœëŒ“ê°’';
                    updateStepInfo(`ìœ„ì¹˜ ${i}ì˜ ${currentData[i]}ì´ ì´ë¯¸ ${targetType}ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.`);
                    yield;
                }

                // ì •ë ¬ëœ ì›ì†Œ í‘œì‹œ
                highlightBlocks([i], 'sorted');
                currentStep++;
                updateProgressBar((currentStep / totalSteps) * 100);
                yield;
            }

            // ëª¨ë“  ì›ì†Œê°€ ì •ë ¬ë¨ í‘œì‹œ
            highlightBlocks(Array.from({length: n}, (_, i) => i), 'sorted');
            updateStepInfo(`ğŸ‰ ${isAscending ? 'ì˜¤ë¦„ì°¨ìˆœ' : 'ë‚´ë¦¼ì°¨ìˆœ'} ì„ íƒì •ë ¬ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ìˆœì°¨íƒìƒ‰ ì œë„ˆë ˆì´í„° (ë‹¨ê³„ë³„ ì‹¤í–‰ìš©)
        function* linearSearchGenerator() {
            totalSteps = currentData.length;
            currentStep = 0;

            updateStepInfo(`${searchTarget}ì„ ì°¾ê¸° ìœ„í•´ ì²˜ìŒë¶€í„° í•˜ë‚˜ì”© í™•ì¸í•©ë‹ˆë‹¤. (ì •ë ¬ë˜ì§€ ì•Šì€ ë°ì´í„°ë„ íƒìƒ‰ ê°€ëŠ¥!)`);
            yield;

            for (let i = 0; i < currentData.length; i++) {
                highlightBlocks([i], 'comparing');
                updateStepInfo(`ìœ„ì¹˜ ${i}: ${currentData[i]}ì„ í™•ì¸í•©ë‹ˆë‹¤.`);
                yield;

                currentStep++;
                updateProgressBar((currentStep / totalSteps) * 100);

                if (currentData[i] === searchTarget) {
                    highlightBlocks([i], 'found');
                    updateStepInfo(`ğŸ‰ ${searchTarget}ì„ ìœ„ì¹˜ ${i}ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                    return;
                }
            }

            clearHighlights();
            updateStepInfo(`ğŸ˜ ${searchTarget}ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
        }

        // ì´ì§„íƒìƒ‰ ì œë„ˆë ˆì´í„° (ë‹¨ê³„ë³„ ì‹¤í–‰ìš©)
        function* binarySearchGenerator() {
            let left = 0;
            let right = currentData.length - 1;
            totalSteps = Math.ceil(Math.log2(currentData.length));
            currentStep = 0;

            updateStepInfo(`ì •ë ¬ëœ ë°°ì—´ì—ì„œ ${searchTarget}ì„ ì´ì§„íƒìƒ‰ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤. (ì´ì§„íƒìƒ‰ì€ ë°˜ë“œì‹œ ì •ë ¬ëœ ë°ì´í„°ê°€ í•„ìš”í•´ìš”!)`);
            yield;

            while (left <= right) {
                const mid = Math.floor((left + right) / 2);
                
                // íƒìƒ‰ ë²”ìœ„ í‘œì‹œ
                highlightBlocks(Array.from({length: right - left + 1}, (_, i) => left + i), 'range');
                yield;
                
                // ì¤‘ê°„ê°’ ê°•ì¡°
                highlightBlocks([mid], 'comparing');
                updateStepInfo(`ì¤‘ê°„ ìœ„ì¹˜ ${mid}: ${currentData[mid]}ì„ í™•ì¸í•©ë‹ˆë‹¤.`);
                yield;

                if (currentData[mid] === searchTarget) {
                    highlightBlocks([mid], 'found');
                    updateStepInfo(`ğŸ‰ ${searchTarget}ì„ ìœ„ì¹˜ ${mid}ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                    return;
                } else if (currentData[mid] < searchTarget) {
                    updateStepInfo(`${currentData[mid]} < ${searchTarget}ì´ë¯€ë¡œ ì˜¤ë¥¸ìª½ ì ˆë°˜ì„ íƒìƒ‰í•©ë‹ˆë‹¤.`);
                    left = mid + 1;
                } else {
                    updateStepInfo(`${currentData[mid]} > ${searchTarget}ì´ë¯€ë¡œ ì™¼ìª½ ì ˆë°˜ì„ íƒìƒ‰í•©ë‹ˆë‹¤.`);
                    right = mid - 1;
                }

                currentStep++;
                updateProgressBar((currentStep / totalSteps) * 100);
                yield;
            }

            clearHighlights();
            updateStepInfo(`ğŸ˜ ${searchTarget}ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9752f89a657003cc',t:'MTc1NjIwNzU1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
